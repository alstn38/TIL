### Encoding

```swift
struct User: Encodable {
    let name: String
    let age: Int
}

let jack = [
    User(name: "íœ´", age: 24),
    User(name: "ì­", age: 21),
    User(name: "ë¸Œëœ", age: 22),
    User(name: "ë´", age: 22)
]

let encoder = JSONEncoder()
do {
    let result = try encoder.encode(jack)
    print(result)
    guard let jsonString = String(data: result, encoding: .utf8) else {
        fatalError("error")
    }
    print(jsonString)
    // [{"name":"íœ´","age":24},{"name":"ì­","age":22},{"age":22,"name":"ë¸Œëœ"},{"name":"ë´","age":22}]
} catch {
    print(error.localizedDescription)
}
```

ë§Œì•½ JsonStringì„ í˜•ì‹ì— ë§ê²Œ ì´ì˜ê²Œ ì¶œë ¥í•˜ê³  ì‹¶ë‹¤ë©´

ì•„ë˜ ì½”ë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```swift
let encoder = JSONEncoder()
encoder.outputFormatting = .prettyPrinted
```

Dateíƒ€ì…ì„ encodingí•˜ê²Œëœë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ encodingëœë‹¤.

```swift
{
  "age" : 24,
  "birth" : 760928589.524205,
  "name" : "íœ´"
}
```

ì´ë ‡ê²Œ ëœë‹¤ë©´ ì„œë²„ì˜ í•  ì¼ì´ ë§ì•„ì§€ê¸° ë•Œë¬¸ì— ì¡°ê¸ˆ ìˆ˜ì •í•  í•„ìš”ê°€ ìˆë‹¤.

```swift
encoder.dateEncodingStrategy = .iso8601
```

í•´ë‹¹ ì½”ë“œë¥¼ ì¶”ê°€í•˜ê²Œ ëœë‹¤ë©´ ë‚ ì§œì™€ ì‹œê°„ê³¼ ê´€ë ¨ëœ ë°ì´í„° êµí™˜ì„ ë‹¤ë£¨ëŠ” êµ­ì œ í‘œì¤€ ê°’ìœ¼ë¡œ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.

```swift
let encoder = JSONEncoder()
let format = DateFormatter()
format.dateFormat = "MMì›” ddì¼, yyyyë…„"
encoder.dateEncodingStrategy = .formatted(format)
```

í˜¹ì€ ìœ„ì™€ ê°™ì´ ë‚´ê°€ ì›í•˜ëŠ” í˜•ì‹ì˜ dateFormatìœ¼ë¡œ ë°”ê¾¸ì–´ì„œ ë³´ë‚¼ ìˆ˜ ìˆë‹¤.

### ì˜¤ë¥˜ ì²˜ë¦¬ íŒ¨í„´. ì—ëŸ¬ í•¸ë“¤ë§

do - try catchê°€ ì™œ í•„ìš”í• ê¹Œ?

if-else, switchëŠ” `ì„ íƒ`ì˜ ì˜ë¯¸ì¸ ê²ƒ ê°™ë‹¤. 

í•˜ì§€ë§Œ do - try catchëŠ” ì‚¬ìš©ìì˜ ì„ íƒì€ ì•„ë‹ˆê³  `ì—ëŸ¬`ì˜ ê´€ì ì¸ ê²ƒ ê°™ë‹¤. 

ë‹¹ì—°íˆ ì˜ ë˜ì–´ì•¼í•˜ëŠ” ê²ƒì¸ë° ì˜¤ë¥˜ê°€ ë°œìƒí–ˆë‹¤ì˜ ê´€ì ì´ ì•„ë‹ê¹Œ? ë¼ëŠ” ìƒê°ì´ë‹¤.

ê·¸ë¦¬ê³  ì¶”ê°€ì ì¸ ë‚´ ìƒê°ì€ ê²°êµ­ func ë‚´ë¶€ì—ì„œ ì—ëŸ¬ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ if-else, switchë¥¼ í†µí•´ ì˜¤ë¥˜ë¼ëŠ” ê²ƒì„ ë°˜í™˜í•˜ê¸° ìœ„í•´ì„œëŠ” ê²°êµ­ì— ê°’ì„ ë³´ë‚´ì•¼í•œë‹¤. ê·¸ ê°’ì´ ë¹ˆ ë°°ì—´ì´ ë˜ì—ˆë“ , ë¹ˆ ë¬¸ìì—´ì´ ë˜ì—ˆë“  ìš°ë¦¬ëŠ” ì´ëŸ¬í•œ ê°’ì„ ì—ëŸ¬ë¼ê³  ìƒê°í•˜ìë¼ëŠ” ì •ì˜ê°€ í•„ìš”í•  ê²ƒ ê°™ë‹¤.

í•˜ì§€ë§Œ ë¹ˆ ë°°ì—´ê³¼ ë¹ˆ ë¬¸ìì—´ì„ ì‚¬ìš©í•  ìˆ˜ë„ ìˆê³  ê³¼ì—° ì´ëŸ¬í•œ ê°’ì´ ë¬¸ì œë¼ê³  í•  ìˆ˜ ìˆëŠ”ê°€? ë‚˜ëŠ” ì•„ë‹Œ ê²ƒ ê°™ë‹¤.

ë”°ë¼ì„œ, ì˜ë¯¸ê°€ ì—†ì„ ìˆ˜ë„ ìˆëŠ” ê°’ì„ ê¼­ ë°˜í™˜í•˜ì§€ ì•Šì•„ë„ ë˜ëŠ” `ì—ëŸ¬`ë¼ëŠ” ê²ƒì„ ëª…ì‹œì ìœ¼ë¡œ ë˜ì§€ëŠ” ê²ƒì€ ì¤‘ìš”í•œ ê²ƒ ê°™ë‹¤.

ì—ëŸ¬ íƒ€ì…ì˜ ì •ì˜

```swift
// ì»´íŒŒì¼ëŸ¬ê°€ ì˜¤ë¥˜ì˜ íƒ€ì…ì„ ì¸ì •í•˜ê²Œ ëœë‹¤.
enum ValidationError: Error {
    case emptyString
    case isNotInt
    case isNotDate
}
```

`throwing function` - throw í‚¤ì›Œë“œë¡œ í‘œì‹œëœ í•¨ìˆ˜

- ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¬ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œë¦¬ê¸° ìœ„í•´ `throws` í‚¤ì›Œë“œë¥¼ í•¨ìˆ˜ ì„ ì–¸ë¶€ì˜ íŒŒë¼ë¯¸í„° ë’¤ì— ë¶™ì¸ë‹¤.

```swift
func validateUserInputError (text: String) throws -> Bool {
    guard !(text.isEmpty) else {
        throw ValidationError.emptyString
    }
    
    guard Int(text) != nil else {
        throw ValidationError.isNotInt
    }
    
    guard checkDateFormat(text: text) else {
        throw ValidationError.isNotDate
    }
    
    return true
}
```

- ì˜¤ë¥˜ ëŒ€ì‘ì„ í•  ìˆ˜ ì—†ëŠ” ì½”ë“œ - ì•±ì´ í„°ì§„ë‹¤.

```swift
let result = try validateUserInputError(text: <#T##String#>)
```

- ì˜¤ë¥˜ ëŒ€ì‘ì„ í•  ìˆ˜ ì—†ëŠ” ì½”ë“œ - ì•±ì´ í„°ì§€ì§„ ì•ŠëŠ”ë‹¤. (ì–´ë–¤ ì˜¤ë¥˜ì¸ì§€ ì•Œ ìˆ˜ ì—†ìŒ)

```swift
let result = try? validateUserInputError(text: <#T##String#>)
```

- ì˜¤ë¥˜ ëŒ€ì‘ì„ í•  ìˆ˜ ìˆëŠ” ì½”ë“œ - ì–´ë–¤ ì˜¤ë¥˜ì¸ì§€ ì•Œ ìˆ˜ ìˆë‹¤.

```swift
do {
    let result = try validateUserInputError(text: <#T##String#>)
} catch ValidationError.isNotDate {
    print("ëª…ì‹œì ìœ¼ë¡œ errorë¥¼ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤.")
} catch {
    // ëª¨ë“  ì—ëŸ¬ì— ëŒ€í•´ì„œ ë°›ì„ìˆ˜ ìˆë‹¤.
    switch error as? ValidationError {
    case .emptyString:
        print("")
    case .isNotInt:
        print("")
    case .isNotDate:
        print("")
    default:
        print("")
    }
}
```

### Typed Throws

<aside>
ğŸ’¡

**Error íƒ€ì…ì„ êµ¬ì²´ì ìœ¼ë¡œ ì •ì˜í•  ìˆ˜ ì—†ì–´ì„œ íƒ€ì…ìºìŠ¤íŒ…ì„ í™œìš©í•´ì„œ ì²˜ë¦¬í•´ì•¼í•œë‹¤.**

</aside>

â‡’ Swift6 - ì˜¤ë¥˜ íƒ€ì…ì— ëŒ€í•´ êµ¬ì²´ì ì¸ ì •ì˜ ì œê³µ

```swift
func validateUserInputError (text: String) throws(ValidationError) -> Bool {
    guard !(text.isEmpty) else {
        throw ValidationError.emptyString
    }
    
    guard Int(text) != nil else {
        throw ValidationError.isNotInt
    }
    
    guard checkDateFormat(text: text) else {
        throw ValidationError.isNotDate
    }
    
    return true
}
```

```swift
do {
    let result = try validateUserInputError(text: <#T##String#>)
} catch {
    switch error {
    case .emptyString:
        print("")
    case .isNotInt:
        print("")
    case .isNotDate:
        print("")
    }
}
```

### Property wrapper

```swift
@propertyWrapper
struct UserDefaultsProperty<T> {
    let key: String
    let defaultValue: T
    
    private(set) var projectedValue: Bool = false
    
    var wrappedValue: T {
        get {
            UserDefaults.standard.object(forKey: key) as? T ?? defaultValue
        }
        set {
            UserDefaults.standard.setValue(newValue, forKey: key)
        }
    }
}

enum UserDefaultsManager {
    
    enum Key: String {
        case age
        case first
        case lask
    }
    
    @UserDefaultsProperty(key: Key.age.rawValue, defaultValue: "")
    static var age
}

UserDefaultsManager.age // wrappedValue
UserDefaultsManager.$age // projectedValue - wrapperì˜ ë¶€ê°€ì ì¸ ìƒíƒœë¥¼ ì™¸ë¶€ì— ë³´ì—¬ì£¼ë ¤ê³  í•  ë•Œ
```

Property wrapperì—ì„œ ìë™ì ìœ¼ë¡œ êµ¬ì¡°ì²´ë¥¼ í˜¸ì¶œ ì‹œì— ëŒ€ì‹  í˜¸ì¶œë  í”„ë¡œí¼í‹°ë¥¼ ì§€ì •í•˜ëŠ” ê²ƒì´ë‹¤.

ë‹¤ë¥¸ ì‚¬ìš© ì˜ˆì‹œì½”ë“œ

```swift
@propertyWrapper
struct Decimal {
    
    var money: String
    var projectedValue = ""
    var wrappedValue: String {
        get {
            return Int(money)!.formatted(.number) + "ì›"
        } set {
            money = newValue
            projectedValue = "ë‹¹ì‹ ì´ ì´ì²´í•œ ê¸ˆì•¡ì€ \(newValue)ì…ë‹ˆë‹¤."
        }
    }
}

struct Example {
    @Decimal(money: "7000")
    var number
}

var example = Example()
example.number //"7,000ì›"
example.number = "32000"
example.number //"32,000ì›"
example.$number // "ë‹¹ì‹ ì´ ì´ì²´í•œ ê¸ˆì•¡ì€ 32000ì…ë‹ˆë‹¤."
```

### Stringì˜ indexì¡°íšŒí•˜ê¸° - subcript

```swift
let nick = "ì•ˆë…•í•˜ì„¸ìš” ë°˜ê°’ìŠµë‹ˆë‹¤."
nick[2] // "í•˜"ë¥¼ ì¶œë ¥í•˜ê³  ì‹¶ìŒ.
// 'subscript(_:)' is unavailable: cannot subscript String with an Int, use a String.Index instead.
```

í•˜ì§€ë§Œ ì¸ë±ìŠ¤ë¡œ ì ‘ê·¼í•  ìˆ˜ ì—†ìŒ.

Stringì—ëŠ” `subscript(_:)` ë¬¸ë²•ì´ ì ìš©ë˜ì–´ìˆì§€ ì•Šê¸° ë•Œë¬¸ì´ë‹¤.

```swift
extension String {
    subscript(_ idx: Int) -> String? {
        guard (0..<count).contains(idx) else {
            return nil
        }
        
        let result = index(startIndex, offsetBy: idx)
        return String(self[result])
    }
}

let nick = "ì•ˆë…•í•˜ì„¸ìš” ë°˜ê°’ìŠµë‹ˆë‹¤."
nick[2] // "í•˜"
```

ë˜ ë‹¤ë¥¸ ì‚¬ìš© ì˜ˆì‹œ

```swift
struct UserPhoneList {
    var contacts = [
        "01012341234",
        "01045674567",
        "01078907890"
    ]
    
    subscript(idx: Int) -> String {
        get {
            return self.contacts[idx]
        } set {
            self.contacts[idx] = newValue
        }
    }
}

let userPhoneList = UserPhoneList()
userPhoneList[1] // "01045674567"
```
