### ìŠ¤ë§ˆìŠ¤ ìŠ¤íƒ

ìœ„ì ¯ì„ ìŠ¤íƒì²˜ëŸ¼ ìŒ“ì•„ë‘˜ ìˆ˜ ìˆë‹¤.

### ì˜¤ëŠ˜ ë³´ê¸°

iPhone ì™¼ìª½ìœ¼ë¡œ ìŠ¤ì™€ì´í”„í•˜ë©´ ë‚˜ì˜¤ëŠ” ìœ„ì ¯ë“¤

### ìœ„ì ¯

- Interactive Widget(ëŒ€í™”í˜• ìœ„ì ¯)
- iOS17+

- Control Widget (ì ê¸ˆí™”ë©´ ìœ„ì ¯ iOS18+)
- ì ê¸ˆí™”ë©´ì—ì„œ ì†ì „ë“± í‚¤ê±°ë‚˜ ì¹´ë©”ë¼ í‚¤ê±°ë‚˜..
- iOS16+ë¶€í„° ë“±ì¥..?

- ìœ„ì ¯ í¸ì§‘ ê¸°ëŠ¥

- ë¼ì´ë¸Œ ì—‘í‹°ë¹„í‹°

- WidgetKit (iOS 14+, SwiftUI) vs Today Extension(iOS Deprecated)

### Widgetì€ ë¯¸ë‹ˆ ì•±ì´ ì•„ë‹ˆë‹¤.

- Widgetí•˜ë‚˜ë‹¹ ë©”ëª¨ë¦¬ì˜ í•œê³„ê°€ ìˆë‹¤. (ëŒ€ëµ 30MB)
- ê°œë°œìê°€ ì´ì œ 1ì‹œê°„ì— í•œë²ˆ ì—…ë°ì´íŠ¸ë¡œ ì„¤ì •ì„ í•˜ë”ë¼ë„, ì‹œìŠ¤í…œ ì„¤ì •ìƒ ì•ˆë  ìˆ˜ë„ ìˆë‹¤.

### SwiftUI, UIKitë¶€ë¶„ì—ì„œ Widgetì—…ë°ì´íŠ¸

1. ì €ì¥ë²„íŠ¼ í´ë¦­ ì‹œ ìœ„ì ¯ì´ ë°”ë¡œ ë Œë”ë§
2. userDefaultì—ì„œ ì €ì¥í–ˆì„ ë•Œ widgetì€ UserDefaultë¥¼ ê°€ì ¸ì˜¤ì§€ ëª»í•¨

```swift
// ìœ„ì ¯ ì—…ë°ì´íŠ¸
WidgetCenter.shared.reloadTimelines(ofKind: "BasicWidget")

// ìœ„ì ¯ ì •ë³´ í™•ì¸
WidgetCenter.shared.getCurrentConfigurations { widget in
    switch widget {
    case .success(let success):
        print(success)
    case .failure(let failure):
        print(failure)
    }
}
```

Widgetì˜ contatinerì™€ ì•±ì˜ containerê°€ ë‹¤ë¥´ë‹¤. ë”°ë¼ì„œ ê°™ì€ UserDefaultë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.

ê·¸ë˜ì„œ ì•±ê³¼ ìœ„ì ¯ì—ì„œ ë™ì‹œì— ì‚¬ìš©í•˜ëŠ” ë°ì´í„°ëŠ” shared containerë¥¼ í†µí•´ ê³µìœ í•˜ë©´ ëœë‹¤.

ê·¸ëŸ¬í•œ í‚¤ì›Œë“œ ë°”ë¡œ App Groupì´ë‹¤.


ì˜¤í•´í•˜ì§€ë§ì.

- ìœ„ì ¯ ë§Œë“¤ ë•Œ appGroupì´ ë¬´ì¡°ê±´ í•„ìš”í•˜ë‹¤. (X)
- appGroupì€ ìœ„ì ¯ì—ì„œë§Œ ì‚¬ìš©ëœë‹¤ (X)

### AppGroupì‚¬ìš©í•˜ê¸°.

ì €ì¥í•˜ê¸°

```swift
UserDefaults(suiteName: "group.sample.alstn38.practice")?.set(nickName, forKey: "SampleName")
```

ë¶ˆëŸ¬ì˜¤ê¸°

```swift
UserDefaults(suiteName: "group.sample.alstn38.practice")?.string(forKey: "SampleName")
```

ì‰½ê²Œ ì‚¬ìš©í•˜ê¸°

```swift
extension UserDefaults {
    
    static var groupShared: UserDefaults {
        let appID = "group.sample.alstn38.practice"
        return UserDefaults(suiteName: appID)!
    }
}
```

Widget ì „ì²´ ì½”ë“œ

- ë¯¸ë‹ˆì•±ìœ¼ë¡œ ì‚¬ìš©í•˜ì§€ë§ì
- ë©”ëª¨ë¦¬, ë Œë”ë§ì„ ìƒê°í•˜ì
- ì•±ê·¸ë£¹ì„ í™œìš©í•˜ì.

```swift
struct Provider: TimelineProvider {
    // ìœ„ì ¯ ìµœì´ˆ ë Œë”ë§
    // ì ê¸ˆí™”ë©´ì—ì„œ ìœ„ì ¯ ë“±ë¡. ìœ„ì ¯ ë¯¼ê°í•œ ì •ë³´ë¥¼ ìˆ¨ê¸°ê³ ì í•  ë•Œ ì ê¸ˆí•´ì œí•˜ê¸° ì „ê¹Œì§€ placeholder
    func placeholder(in context: Context) -> SimpleEntry {
        SimpleEntry(date: Date(), emoji: "ğŸ˜€ğŸ˜€")
    }

    // ìœ„ì ¯ ê°¤ëŸ¬ë¦¬ì—ì„œ ë¯¸ë¦¬ë³´ê¸° í™•ì¸ (ìœ„ì ¯ ê²€ìƒ‰ ìœ„ì ¯ ì¶”ê°€í• ë•Œ ë³´ëŠ” í™”ë©´)
    func getSnapshot(in context: Context, completion: @escaping (SimpleEntry) -> ()) {
        let entry = SimpleEntry(date: Date(), emoji: "ğŸ˜€ğŸ˜€ğŸ˜€")
        completion(entry)
    }

    // ìœ„ì ¯ ìƒíƒœ ë³€ê²½ ì‹œì 
    // ë¯¸ë¦¬ ìœ„ì ¯ ë·°ë¥¼ ê·¸ë¦¬ê³  ìˆë‹¤ê°€ ì‹œê°„ì— ë§ì¶° ë·°ë¥¼ ì—…ë°ì´íŠ¸ í•˜ê³ ,
    // TimelineEntryë¥¼ í†µí•´ íŠ¹ì • ì‹œê°„ì— ìœ„ì ¯ì„ ì—…ë°ì´íŠ¸ í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì¤Œ.
    // ìœ„ì ¯ ë·°ì— ìƒˆë¡œìš´ ë Œë”ë§ìœ¼ë¡œ ì—…ë°ì´íŠ¸ í•  ì‹œê¸°ë¥¼ ìœ„ì ¯í‚·ì—ê²Œ ì•Œë ¤ì¤Œ
    func getTimeline(in context: Context, completion: @escaping (Timeline<Entry>) -> ()) {
        var entries: [SimpleEntry] = []

        // Generate a timeline consisting of five entries an hour apart, starting from the current date.
        let currentDate = Date()
        for hourOffset in 0 ..< 5 {
            let entryDate = Calendar.current.date(byAdding: .hour, value: hourOffset, to: currentDate)!
            let entry = SimpleEntry(date: entryDate, emoji: "ğŸ˜€")
            entries.append(entry)
        }
        
        // íƒ€ì„ë¼ì¸ ì •ì±…
        // íƒ€ì„ë¼ì¸ ë§ˆì§€ë§‰ ë‚ ì§œê°€ ì§€ë‚œ ë’¤, ìœ„ì ¯í‚·ì´ ìƒˆë¡œìš´ íƒ€ì„ë¼ì¸ì„ ìš”ì²­í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •
        // WWDC ë Œë”ë§ ìµœì í™”
        let timeline = Timeline(entries: entries, policy: .atEnd)
        completion(timeline)
    }

//    func relevances() async -> WidgetRelevances<Void> {
//        // Generate a list containing the contexts this widget is relevant in.
//    }
}

// Entry: TimelineEntry
// ì‹¤ì œ ìœ„ì ¯ êµ¬ì„± ì‹œ í•„ìš”í•œ ë°ì´í„°
// TimelineEntryì˜ relevanceê°€ ìˆëŠ”ë° ë„¤ë¹„ê²Œì´ì…˜ ìŠ¤íƒì—ì„œ ì–´ë–¤ì‹œê°„ì— ì–´ë–¤ ìœ„ì ¯ ë³´ì—¬ì¤„ì§€.. scoreë¥¼ ì •í•œë‹¤
struct SimpleEntry: TimelineEntry {
    let date: Date
    let emoji: String
}

// EntryView: ì‹¤ì œ ìœ„ì ¯ì— ëŒ€í•œ ë·° ë‹´ë‹¹
struct BasicWidgetEntryView : View {
    var entry: Provider.Entry

    var body: some View {
        VStack {
            Text(UserDefaults(suiteName: "group.sample.alstn38.practice")?.string(forKey: "SampleName") ?? "ì—†ìŒ")
                .font(.title)
            Text(entry.date, style: .time)

            Text("Emoji: \(Int.random(in: 1...100))")
            Text(entry.emoji)
        }
    }
}

// ìµœì¢…ì ìœ¼ë¡œ êµ¬ì„±ë˜ëŠ” WidgetConfiguration
struct BasicWidget: Widget {
    let kind: String = "BasicWidget" //ê³ ìœ í•œ ìœ„ì ¯
    // ìœ„ì ¯ í¸ì§‘ì´ ì—†ëŠ” ì •ì ì¸ ìƒíƒœë¡œ ìœ„ì ¯ ì„¤ì •
    var body: some WidgetConfiguration {
        StaticConfiguration(kind: kind, provider: Provider()) { entry in
            if #available(iOS 17.0, *) {
                BasicWidgetEntryView(entry: entry)
                    .containerBackground(.fill.tertiary, for: .widget)
            } else {
                BasicWidgetEntryView(entry: entry)
                    .padding()
                    .background()
            }
        }
        .configurationDisplayName("í•˜ì´í•˜ì´")
        .description("ë””ìŠ¤í¬ë¦½ì…˜ ì„¤ëª…ì„ ë§í•´ìš”")
        .supportedFamilies([.systemSmall, .systemMedium])
    }
}
```

### NavigationLink êµ¬ì„±

1.NavigationLink

```swift
// NavigationLinkë¥¼ ë²„íŠ¼ ì²˜ëŸ¼
// - SecondViewê°€ initì´ ëœë‹¤.
NavigationLink("Push") {
    SecondView()
}
```

1. NavigationLink (Deprecated)

```swift
NavigationLink("Second Push", isActive: $isPush) {
    DetailView()
}

// isPushì„ DetailViewì—ì„œ Bindingí•˜ì—¬ ê°’ì„ ë³€ê²½í•˜ì—¬ pop, dismissë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.
```

Navigation popë°©ë²•

```swift
struct SecondView: View {
    
    @Environment(\.dismiss) // iOS15+
    private var pop
    
    var body: some View {
        Text("Second View")
        Button("Pop Button") {
            pop()
        }
    }
}
```

### NavigationStack

- ìƒìœ„ë·°ì— í•˜ìœ„ë·°ê°€ ì¢…ì†ì ì´ì§€ ì•Šì€ í˜•íƒœë¡œ ê°’ ì „ë‹¬, í™”ë©´ ì „í™˜

```swift
struct MyRootView: View {
    var body: some View {
        NavigationStack {
            VStack {
                Text("Hello Wolrd")
                NavigationLink("Second Push", value: 5)
            }
            .navigationTitle("NavigationStack")
        }
        .navigationDestination(for: Int.self) { number in
            MyChildView(number: number)
        }
    }
}

struct MyChildView: View {
    
    let number: Int
    
    var body: some View {
        Text("My ChildView \(number)")
    }
}
```

```swift
struct ListView: View {
    
    let array = ["ê³ ë˜ë°¥", "ì•„ë©”ë¦¬ì¹´ë…¸", "í˜¸ì˜¬ìŠ¤", "ì¹™ì´‰"]
    
    @Namespace private var minsoo
    
    var body: some View {
        NavigationStack {
            ScrollView {
                LazyVStack {
                    ForEach(array, id: \.self) { item in
                        
                        NavigationLink(value: item) {
                            HStack {
                                Image(systemName: "star")
                                Text(item)
                            }
                            .background(.gray.opacity(0.4))
                        }
                    }
                }
            }
            .navigationTitle("Stack")
            .navigationDestination(for: String.self) {
                ListDetailView(name: $0)
                    .navigationTransition(.zoom(sourceID: $0, in: minsoo))
            }
        }

    }
}

struct ListDetailView: View {
    
    let name: String
    
    var body: some View {
        Text("List Detail View \(name)")
    }
}
```
